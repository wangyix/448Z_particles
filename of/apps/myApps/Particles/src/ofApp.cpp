#include "ofApp.h"
#include <assert.h>


static const float wav[WAV_SAMPLES] = { 0.000397, 0.002014, 0.006073, 0.011749, 0.018616, 0.026337, 0.032806, 0.038483, 0.041718, 0.044159, 0.044952, 0.044952, 0.044556, 0.043732, 0.043335, 0.042542, 0.040894, 0.038086, 0.034027, 0.029572, 0.025116, 0.021454, 0.019440, 0.018219, 0.016205, 0.015381, 0.015381, 0.015381, 0.014160, 0.011322, 0.006866, 0.002808, -0.000793, -0.002808, -0.002808, -0.000793, 0.000397, 0.000000, -0.000793, -0.002014, -0.002808, -0.002014, 0.000397, 0.005646, 0.010925, 0.010925, 0.004456, -0.008087, -0.024689, -0.040497, -0.051453, -0.056702, -0.058319, -0.059540, -0.062775, -0.068054, -0.072510, -0.074951, -0.073730, -0.068878, -0.059143, -0.044952, -0.030365, -0.018219, -0.010529, -0.007263, -0.008087, -0.010101, -0.011749, -0.011749, -0.008911, -0.004456, 0.000397, 0.005249, 0.010529, 0.016998, 0.021851, 0.025909, 0.028748, 0.029572, 0.029968, 0.031982, 0.034027, 0.033203, 0.030365, 0.028748, 0.028748, 0.028748, 0.028351, 0.027954, 0.026337, 0.021454, 0.014160, 0.008087, 0.004028, 0.000000, -0.006073, -0.013367, -0.021454, -0.029968, -0.037659, -0.044952, -0.049408, -0.050629, -0.048187, -0.043335, -0.036865, -0.028748, -0.022278, -0.017822, -0.013367, -0.010925, -0.011749, -0.014160, -0.015381, -0.014557, -0.011322, -0.006470, -0.002411, 0.000000, 0.001190, 0.003632, 0.009308, 0.016602, 0.023071, 0.025909, 0.022278, 0.012543, 0.002014, -0.004028, -0.000793, 0.009705, 0.022278, 0.031586, 0.035248, 0.031586, 0.022675, 0.013367, 0.008087, 0.007263, 0.008484, 0.010529, 0.011322, 0.009308, 0.005249, 0.000793, -0.002014, -0.002014, 0.000793, 0.008087, 0.018219, 0.027130, 0.029968, 0.026337, 0.017395, 0.004456, -0.011322, -0.027527, -0.037659, -0.040100, -0.035248, -0.025513, -0.015778, -0.009308, -0.006866, -0.007690, -0.009705, -0.010925, -0.011322, -0.010101, -0.007690, -0.005646, -0.004852, -0.005249, -0.004456, 0.000397, 0.008087, 0.015381, 0.021851, 0.025116, 0.025513, 0.025116, 0.023895, 0.019836, 0.012543, 0.002411, -0.007263, -0.015778, -0.022278, -0.025116, -0.024292, -0.020660, -0.015381, -0.009705, -0.003632, 0.000397, 0.001617, 0.001190, 0.000397, 0.000000, 0.002014, 0.005249, 0.006073, 0.003235, -0.001190, -0.004852, -0.005646, -0.005249, -0.003235, 0.001190, 0.007690, 0.014557, 0.020660, 0.022278, 0.019440, 0.013367, 0.007263, 0.003632, 0.001190, -0.000793, -0.002411, -0.002014, 0.001190, 0.005249, 0.009705, 0.015381, 0.021454, 0.024292, 0.023071, 0.019440, 0.014557, 0.008087, -0.001190, -0.010529, -0.017395, -0.020233, -0.018616, -0.014160, -0.010925, -0.009705, -0.010529, -0.010101, -0.006470, -0.001617, 0.001190, 0.002808, 0.004028, 0.005646, 0.006866, 0.007263, 0.008087, 0.009308, 0.011322, 0.014160, 0.015381, 0.013763, 0.011749, 0.012146, 0.013763, 0.014557, 0.014160, 0.014160, 0.016205, 0.018219, 0.018616, 0.016205, 0.010925, 0.004028, -0.002808, -0.008087, -0.010925, -0.012146, -0.012543, -0.011749, -0.009308, -0.007690, -0.008484, -0.012146, -0.014984, -0.014984, -0.011322, -0.006073, -0.004028, -0.006866, -0.012543, -0.017822, -0.020660, -0.019440, -0.016205, -0.012939, -0.009705, -0.003235, 0.004028, 0.010925, 0.023499, 0.049835, 0.097626, 0.169769, 0.278748, 0.455811, 0.658417, 0.743500, 0.610992, 0.275909, -0.170166, -0.597229, -0.892609, -1.000000, -0.927460, -0.728912, -0.478119, -0.242279, -0.067657, 0.027954, 0.051025, 0.026337, -0.017395, -0.056702, -0.074951, -0.066833, -0.034821, 0.012543, 0.065216, 0.113434, 0.148682, 0.166931, 0.168945, 0.158417, 0.140167, 0.119110, 0.099243, 0.082642, 0.072113, 0.066437, 0.064423, 0.065216, 0.067261, 0.070496, 0.072510, 0.070892, 0.064423, 0.055084, 0.044159, 0.031982, 0.020660, 0.011322, 0.002411, -0.006866, -0.015381, -0.022278, -0.025513, -0.024689, -0.021057, -0.017395, -0.015778, -0.018219, -0.023499, -0.029968, -0.035645, -0.038879, -0.037262, -0.031189, -0.022278, -0.012543, -0.003632, 0.003235, 0.007690, 0.008087, 0.005249, 0.000793, -0.005249, -0.012543, -0.018219, -0.019836, -0.015778, -0.006470, 0.004028, 0.014160, 0.021454, 0.024292, 0.023071, 0.018616, 0.011322, 0.003235, -0.002411, -0.004456, -0.002014, 0.002808, 0.008484, 0.011749, 0.010925, 0.006470, -0.000397, -0.006866, -0.008484, -0.006866, -0.004028, -0.000397, 0.003235, 0.006073, 0.008087, 0.010101, 0.011749, 0.011749, 0.010101, 0.008484, 0.007263, 0.006470, 0.007263, 0.008911, 0.010925, 0.013367, 0.015381, 0.014557, 0.011322, 0.007690, 0.007263, 0.010101, 0.014160, 0.016602, 0.016602, 0.014160, 0.011322, 0.006866, 0.001617, -0.004028, -0.009308, -0.012543, -0.013367, -0.012939, -0.011749, -0.011749, -0.014160, -0.018616, -0.023895, -0.028351, -0.031189, -0.031982, -0.031189, -0.029572, -0.027954, -0.025513, -0.021454, -0.014984, -0.008911, -0.004852, -0.003632, -0.004456, -0.007690, -0.011749, -0.016998, -0.022675, -0.025513, -0.023071, -0.016602, -0.009308, -0.002808, 0.001617, 0.003235, 0.002014, 0.001617, 0.004456, 0.011322, 0.019836, 0.029968, 0.039276, 0.046173, 0.049011, 0.048615, 0.046173, 0.042938, 0.039703, 0.037262, 0.036438, 0.034821, 0.031982, 0.027130, 0.018219, 0.005249, -0.009308, -0.022675, -0.032410, -0.038086, -0.041321, -0.040894, -0.038879, -0.036041, -0.031586, -0.025513, -0.017395, -0.008911, -0.002014, 0.000000, -0.003632, -0.008911, -0.014557, -0.021057, -0.025116, -0.025513, -0.022675, -0.017395, -0.011322, -0.004852, 0.001617, 0.007690, 0.011322, 0.011322, 0.009308, 0.007263, 0.004852, 0.004456, 0.004852, 0.004028, 0.001617, -0.002014, -0.006866, -0.014160, -0.021057, -0.023071, -0.019440, -0.012146, -0.004456, 0.001617, 0.002808, -0.001617, -0.010925, -0.023071, -0.032806, -0.038086, -0.036438, -0.026733, -0.009308, 0.009705, 0.022278, 0.025513, 0.020660, 0.010529, -0.001190, -0.011322, -0.015778, -0.015778, -0.010925, -0.002411, 0.006073, 0.010101, 0.010101, 0.006866, 0.002808, 0.000000, -0.000397, 0.002411, 0.007263, 0.012939, 0.018219, 0.021057, 0.021057, 0.016998, 0.009308, 0.001617, -0.002808, -0.002808, 0.003235, 0.012543, 0.021057, 0.026337, 0.027527, 0.023895, 0.019043, 0.015381, 0.015778, 0.019043, 0.021851, 0.023499, 0.023499, 0.021454, 0.016602, 0.011749, 0.006073, 0.000397, -0.005646, -0.012543, -0.019836, -0.026733, -0.031189, -0.033203, -0.033630, -0.031982, -0.027954, -0.024689, -0.022278, -0.020233, -0.018616, -0.016998, -0.016205, -0.018219, -0.021454, -0.025513, -0.029968, -0.033203, -0.034027, -0.032806, -0.028748, -0.022278, -0.014557, -0.004852, 0.004852, 0.014160, 0.021454, 0.026337, 0.030365, 0.031982, 0.030792, 0.028748, 0.024689, 0.020233, 0.018616, 0.019440, 0.021057, 0.021057, 0.018616, 0.014160, 0.009308, 0.004456, 0.002411, 0.003632, 0.008087, 0.013367, 0.015381, 0.013763, 0.010529, 0.004028, -0.003632, -0.011322, -0.016205, -0.017395, -0.015381, -0.012146, -0.008911, -0.004852, -0.000793, 0.002808, 0.005249, 0.004456, 0.001190, -0.001190, -0.002808, -0.003632, -0.004456, -0.003235, 0.002014, 0.009308, 0.015381, 0.018219, 0.019043, 0.019043, 0.018616, 0.016602, 0.012543, 0.009308, 0.006866, 0.006470, 0.009308, 0.015381, 0.023499, 0.030365, 0.034821, 0.036438, 0.034027, 0.025116, 0.011322, -0.004028, -0.016602, -0.024689, -0.027527, -0.027527, -0.025513, -0.021454, -0.016602, -0.013763, -0.013367, -0.014984, -0.015778, -0.014160, -0.009308, -0.003632, -0.000397, 0.000793, 0.000793, -0.000397, -0.001190, 0.000000, 0.005249, 0.012543, 0.018219, 0.021057, 0.023499, 0.027130, 0.032806, 0.036438, 0.034821, 0.027527, 0.017395, 0.007690, 0.002808, 0.004852, 0.011749, 0.019043, 0.023895, 0.024689, 0.018219, 0.007690, -0.003632, -0.013763, -0.022675, -0.028351, -0.029968, -0.028748, -0.025116, -0.019836, -0.015381, -0.013367, -0.013763, -0.016602, -0.020660, -0.023895, -0.023499, -0.021057, -0.016998, -0.014557, -0.014557, -0.017395, -0.021057, -0.022675, -0.022278, -0.019836, -0.015381, -0.009308, -0.004028, 0.001190, 0.005646, 0.008087, 0.008911, 0.010101, 0.013367, 0.019836, 0.027954, 0.034424, 0.036041, 0.032806, 0.025909, 0.017822, 0.009308, 0.001190, -0.005646, -0.011322, -0.015778, -0.019043, -0.020233, -0.017822, -0.012543, -0.006866, -0.003235, -0.002411, -0.006470, -0.014160, -0.023499, -0.029144, -0.029968, -0.025909, -0.018616, -0.009308, 0.001617, 0.013367, 0.024689, 0.034424, 0.042114, 0.048187, 0.052246, 0.054688, 0.056702, 0.058319, 0.056702, 0.050232, 0.039276, 0.026733, 0.014984, 0.006073, 0.000000, -0.003632, -0.006073, -0.007263, -0.008087, -0.008911, -0.010529, -0.012543, -0.014160, -0.014557, -0.012939, -0.011322, -0.011322, -0.012939, -0.016998, -0.021454, -0.024689, -0.025909, -0.025513, -0.023895, -0.022675, -0.022278, -0.021454, -0.020660, -0.018219, -0.012939, -0.006470, 0.000397, 0.005249, 0.006866, 0.007263, 0.006470, 0.004028, 0.000793, -0.001617, -0.002808, -0.002411, -0.001617, 0.001190, 0.005646, 0.010101, 0.014160, 0.016602, 0.014984, 0.008911, -0.002014, -0.015778, -0.027954, -0.034821, -0.034424, -0.028351, -0.016998, -0.002014, 0.011749, 0.019043, 0.019043, 0.013763, 0.006470, -0.001617, -0.008911, -0.014557, -0.016998, -0.016205, -0.013763, -0.011749, -0.011322, -0.013763, -0.016998, -0.019836, -0.019440, -0.016602, -0.012146, -0.006866, -0.001617, 0.001617, 0.000793, -0.002411, -0.004456, -0.003632, -0.000397, 0.003632, 0.008087, 0.011322, 0.012543, 0.012939, 0.012543, 0.012146, 0.013367, 0.016998, 0.020660, 0.023499, 0.024292, 0.024292, 0.023071, 0.022278, 0.021851, 0.021851, 0.021454, 0.019043, 0.014557, 0.010925, 0.009705, 0.010925, 0.011322, 0.008484, 0.002411, -0.005249, -0.014160, -0.021454, -0.025909, -0.027527, -0.026337, -0.023499, -0.019836, -0.014984, -0.010101, -0.005249, -0.002808, -0.004456, -0.007263, -0.008911, -0.008484, -0.007263, -0.006866, -0.007263, -0.007690, -0.009705, -0.011749, -0.010925, -0.008087, -0.003632, 0.002411, 0.006866, 0.006866, 0.003632, 0.000000, -0.002411, -0.003235, -0.003632, -0.002411, -0.000397, 0.004456, 0.010925, 0.017822, 0.023071, 0.025513, 0.023895, 0.019440, 0.012939, 0.006073, 0.001617, 0.000397, 0.003632, 0.010101, 0.014557, 0.014557, 0.010529, 0.005249, 0.001190, -0.000397, 0.000397, 0.002411, 0.005249, 0.007263, 0.008911, 0.008911, 0.006866, 0.003235, -0.003235, -0.012146, -0.021057, -0.027527, -0.029144, -0.025909, -0.019440, -0.010925, -0.003235, 0.000793, 0.003235, 0.003235, 0.001190, 0.000397, 0.000397, -0.000397, -0.002014, -0.003632, -0.004028, -0.003235, -0.002014, -0.002411, -0.003632, -0.005646, -0.007263, -0.009705, -0.011322, -0.010529, -0.008911, -0.006470, -0.002808, -0.000397, 0.000397, 0.001617, 0.003235, 0.004456, 0.004456, 0.004852, 0.007263, 0.010529, 0.012146, 0.011749, 0.010925, 0.009705, 0.007263, 0.004852, 0.002411, 0.000000, -0.002014, -0.004028, -0.007263, -0.010925, -0.012543, -0.011322, -0.006470, 0.001190, 0.007263, 0.006470, -0.000397, -0.009308, -0.017395, -0.023071, -0.023895, -0.020660, -0.014160, -0.006866, -0.000793, 0.002808, 0.003632, 0.003235, 0.004028, 0.004456, 0.004456, 0.004456, 0.004028, 0.002411, -0.000397, -0.005646, -0.011749, -0.016205, -0.018219, -0.016205, -0.010925, -0.003235, 0.005249, 0.011322, 0.011749, 0.004852, -0.006470, -0.018219, -0.027130, -0.029572, -0.026733, -0.020660, -0.012543, -0.003235, 0.004852, 0.009705, 0.010529, 0.006073, -0.001190, -0.009308, -0.015778, -0.019440, -0.019043, -0.015778, -0.008911, 0.000793, 0.012146, 0.021057, 0.025909, 0.025513, 0.022278, 0.018219, 0.015778, 0.012939, 0.008911, 0.004852, 0.000793, -0.003632, -0.008087, -0.010529, -0.010101, -0.006073, 0.001190, 0.010101, 0.016998, 0.020233, 0.019836, 0.017395, 0.013367, 0.009705, 0.006470, 0.002808, -0.002411, -0.009308, -0.014984, -0.019440, -0.023071, -0.024292, -0.023499, -0.021454, -0.020233, -0.019440, -0.019440, -0.021454, -0.025909, -0.032806, -0.040894, -0.048187, -0.053467, -0.056305, -0.055908, -0.051849, -0.044556, -0.036865, -0.028748, -0.020660, -0.012146, -0.002411, 0.007263, 0.013763, 0.016602, 0.018219, 0.020233, 0.023071, 0.023895, 0.024292, 0.023895, 0.023499, 0.024689, 0.028748, 0.034027, 0.040100, 0.045776, 0.050629, 0.054291, 0.056305, 0.056305, 0.053864, 0.049011, 0.040894, 0.031586, 0.023895, 0.019440, 0.016602, 0.013763, 0.010925, 0.010529, 0.012146, 0.013367, 0.011749, 0.009705, 0.007690, 0.004028, -0.001617, -0.007263, -0.012146, -0.014984, -0.016602, -0.018219, -0.021454, -0.025909, -0.030365, -0.033630, -0.035645, -0.036438, -0.034821, -0.029968, -0.022675, -0.015778, -0.007690, 0.001190, 0.006470, 0.007263, 0.006470, 0.006073, 0.006470, 0.006073, 0.005646, 0.006470, 0.008911, 0.012146, 0.016205, 0.020660, 0.023499, 0.023895, 0.021454, 0.018219, 0.015778, 0.014160, 0.012146, 0.009705, 0.006073, 0.002808, 0.002014, 0.004028, 0.008911, 0.014160, 0.018219, 0.020233, 0.020660, 0.020233, 0.021454, 0.024689, 0.028748, 0.032410, 0.031586, 0.023499, 0.010101, -0.004028, -0.015381, -0.021057, -0.020233, -0.016205, -0.013763, -0.015381, -0.018616, -0.022278, -0.025909, -0.029144, -0.032806, -0.036041, -0.039703, -0.044159, -0.047791, -0.048187, -0.044952, -0.038483, -0.031189, -0.025513, -0.023071, -0.021851, -0.017822, -0.010925, -0.003632, 0.003235, 0.008911, 0.011749, 0.012146, 0.012543, 0.013763, 0.017395, 0.022675, 0.027527, 0.033203, 0.040100, 0.046173, 0.048615, 0.047791, 0.044159, 0.037659, 0.028748, 0.020233, 0.012939, 0.007263, 0.004028, 0.002808, 0.002014, 0.000397, -0.003632, -0.007690, -0.009308, -0.009308, -0.008087, -0.004852, 0.000000, 0.003632, 0.004456, 0.002411, -0.002014, -0.008484, -0.015381, -0.018219, -0.016602, -0.011749, -0.005249, 0.000793, 0.004852, 0.007690, 0.010101, 0.014984, 0.019836, 0.020660, 0.017822, 0.012939, 0.007690, 0.004028, 0.002411, 0.003235, 0.005249, 0.006470, 0.007690, 0.009308, 0.010925, 0.012543, 0.013763, 0.014160, 0.012146, 0.007690, 0.001190, -0.004456, -0.008087, -0.006470, 0.000397, 0.009308, 0.016602, 0.020660, 0.019836, 0.015381, 0.008484, -0.000397, -0.010925, -0.020660, -0.026733, -0.027954, -0.027130, -0.025116, -0.022278, -0.019440, -0.016602, -0.014160, -0.013367, -0.013367, -0.014160, -0.015381, -0.014557, -0.010529, -0.004028, 0.002411, 0.006866, 0.010925, 0.015778, 0.019043, 0.019836, 0.017822, 0.012543, 0.006470, 0.000793, -0.004456, -0.007690, -0.007690, -0.005249, -0.003235, -0.002808, -0.003632, -0.004852, -0.008087, -0.012146, -0.015381, -0.016998, -0.015778, -0.012939, -0.008087, -0.001617, 0.007263, 0.016205, 0.022675, 0.024689, 0.022675, 0.018616, 0.012543, 0.007263, 0.005249, 0.007263, 0.009308, 0.008484, 0.003632, -0.002014, -0.006866, -0.010925, -0.012939, -0.015381, -0.019440, -0.025116, -0.029968, -0.031586, -0.027954, -0.021057, -0.011322, -0.002411, 0.002411, 0.001617, -0.002014, -0.007263, -0.013367, -0.017822, -0.019440, -0.018219, -0.016602, -0.016602, -0.017822, -0.019440, -0.021057, -0.020233, -0.016602, -0.010925, -0.004028, 0.002411, 0.006866, 0.009308, 0.008484, 0.002808, -0.004028, -0.008484, -0.009308, -0.006073, 0.002014, 0.014557, 0.026733, 0.033630, 0.032806, 0.023499, 0.009705, -0.002411, -0.011322, -0.014557, -0.011749, -0.004456, 0.005646, 0.015381, 0.021057, 0.019836, 0.012146, -0.000793, -0.013367, -0.022675, -0.026733, -0.025909, -0.020660, -0.011749, -0.001190, 0.008484, 0.014557, 0.016998, 0.016602, 0.014160, 0.010529, 0.007263, 0.005249, 0.004028, 0.004028, 0.006073, 0.009308, 0.011322, 0.010529, 0.007690, 0.002808, -0.002014, -0.004456, -0.002808, 0.000397, 0.003235, 0.006073, 0.008911, 0.011322, 0.013763, 0.016205, 0.018616, 0.019836, 0.020233, 0.022278, 0.025116, 0.025513, 0.021454, 0.014557, 0.005646, -0.002808, -0.011322, -0.019836, -0.027954, -0.034027, -0.036041, -0.036041, -0.036041, -0.038483, -0.043732, -0.049835, -0.052673, -0.051849, -0.046570, -0.036865, -0.023071, -0.008484, 0.006073, 0.018219, 0.025116, 0.023895, 0.016602, 0.006866, -0.002411, -0.008087, -0.008911, -0.005249, 0.000793, 0.006470, 0.009705, 0.011322, 0.012939, 0.013763, 0.014160, 0.015381, 0.017822, 0.021454, 0.026337, 0.029572, 0.029968, 0.027130, 0.023499, 0.020660, 0.017822, 0.014160, 0.010101, 0.006866, 0.002808, -0.003235, -0.010529, -0.015778, -0.019043, -0.019440, -0.015381, -0.008484, -0.000397, 0.005249, 0.006866, 0.004028, -0.000793, -0.006073, -0.012146, -0.016998, -0.018616, -0.016205, -0.010925, -0.006866, -0.006073, -0.007263, -0.008087, -0.007263, -0.006073, -0.003235, 0.001617, 0.006866, 0.010529, 0.011749, 0.008911, 0.004456, -0.000397, -0.004456, -0.007263, -0.008484, -0.009308, -0.008484, -0.006866, -0.005646, -0.006073, -0.006073, -0.005646, -0.004028, -0.001190, 0.002014, 0.005249, 0.006866, 0.007263, 0.008087, 0.009705, 0.012146, 0.012939, 0.012543, 0.011322, 0.009705, 0.007690, 0.006073, 0.005249, 0.006073, 0.008087, 0.010529, 0.010529, 0.006866, 0.000397, -0.006470, -0.011322, -0.012939, -0.010925, -0.006470, -0.000397, 0.006073, 0.012146, 0.016205, 0.016602, 0.013367, 0.008087, 0.002411, -0.002411, -0.003235, 0.000793, 0.009705, 0.019836, 0.025513, 0.025116, 0.018219, 0.007263, -0.004028, -0.012543, -0.015778, -0.014160, -0.011749, -0.009308, -0.008484, -0.010529, -0.012939, -0.012543, -0.010925, -0.008484, -0.006470, -0.005646, -0.006470, -0.009308, -0.012146, -0.011322, -0.006470, 0.001617, 0.009705, 0.016602, 0.021454, 0.022675, 0.020233, 0.016205, 0.011749, 0.008484, 0.006470, 0.004028, 0.001617, -0.000397, -0.002014, -0.002014, -0.000793, 0.000793, 0.003632, 0.007690, 0.012543, 0.017822, 0.021057, 0.022278, 0.021057, 0.017395, 0.013367, 0.008911, 0.001617, -0.007690, -0.016998, -0.023895, -0.024292, -0.020233, -0.014160, -0.007263, -0.001190, 0.003632, 0.006866, 0.007263, 0.005646, 0.004028, 0.002411, 0.003235, 0.006073, 0.009308, 0.011322, 0.013367, 0.014984, 0.016998, 0.018219, 0.019836, 0.019440, 0.016205, 0.010529, 0.004028, -0.002014, -0.005646, -0.006073, -0.005249, -0.004852, -0.005249, -0.005646, -0.002808, 0.001617, 0.005646, 0.007690, 0.006073, 0.000000, -0.008484, -0.015778, -0.016998, -0.012543, -0.005646, 0.001190, 0.005249, 0.004456, 0.000397, -0.006470, -0.014984, -0.023895, -0.029968, -0.030792, -0.024292, -0.013367, -0.002411, 0.004028, 0.005249, 0.002808, -0.002411, -0.010101, -0.017395, -0.022278, -0.025909, -0.027130, -0.025909, -0.022675, -0.018616, -0.014160, -0.008484, -0.002808, 0.001190, 0.004028, 0.006470, 0.008484, 0.009308, 0.008911, 0.009308, 0.011749, 0.014557, 0.017822, 0.020233, 0.019043, 0.015381, 0.012146, 0.010925, 0.010101, 0.008911, 0.006073, 0.002014, -0.002014, -0.005249, -0.009705, -0.014984, -0.018219, -0.018219, -0.016602, -0.012543, -0.008087, -0.004852, -0.004028, -0.007263, -0.011749, -0.013367, -0.012543, -0.009705, -0.004456, 0.001617, 0.006470, 0.011322, 0.015778, 0.018616, 0.020660, 0.019836, 0.018219, 0.015381, 0.010925, 0.006470, 0.004028, 0.007263, 0.015778, 0.026733, 0.035645, 0.039703, 0.038483, 0.032410, 0.022675, 0.012543, 0.004028, -0.002014, -0.005249, -0.005646, -0.005249, -0.004456, -0.004456, -0.005646, -0.008087, -0.010925, -0.012146, -0.011749, -0.009308, -0.006470, -0.005249, -0.007263, -0.012146, -0.018219, -0.021454, -0.022278, -0.020233, -0.016602, -0.010925, -0.004028, 0.002014, 0.004456, 0.006470, 0.010101, 0.014557, 0.018616, 0.022278, 0.024292, 0.024292, 0.023071, 0.023499, 0.025909, 0.029144, 0.031982, 0.032806, 0.031189, 0.027527, 0.023071, 0.016205, 0.007263, -0.002014, -0.008484, -0.012146, -0.013763, -0.015778, -0.017822, -0.019836, -0.021057, -0.021057, -0.019440, -0.015381, -0.010925, -0.007263, -0.006073, -0.006866, -0.007690, -0.008484, -0.008911, -0.007690, -0.005646, -0.004028, -0.003235, -0.004028, -0.004852, -0.003632, -0.001190, 0.002808, 0.005646, 0.005249, 0.002411, 0.000397, 0.001190, 0.003632, 0.005646, 0.006073, 0.006073, 0.004852, 0.000793, -0.005249, -0.010925, -0.013367, -0.012543, -0.008911, -0.005646, -0.004852, -0.007263, -0.012543, -0.018616, -0.023895, -0.026733, -0.026733, -0.023071, -0.016205, -0.009705, -0.005646, -0.002411, 0.001190, 0.003632, 0.004456, 0.005249, 0.008484, 0.012146, 0.014984, 0.016205, 0.014557, 0.010925, 0.006866, 0.003235, -0.001190, -0.004456, -0.004028, -0.000793, 0.002014, 0.002808, -0.000397, -0.007263, -0.016205, -0.024292, -0.029572, -0.031189, -0.029572, -0.025909, -0.019836, -0.014160, -0.011322, -0.011749, -0.014160, -0.016998, -0.016998, -0.015778, -0.014984, -0.014984, -0.014984, -0.015381, -0.014160, -0.009308, -0.000397, 0.010529, 0.020233, 0.027130, 0.030365, 0.031189, 0.031189, 0.031586, 0.031586, 0.031189, 0.029144, 0.025116, 0.020233, 0.015381, 0.012146, 0.012543, 0.016998, 0.022278, 0.025116, 0.024292, 0.019836, 0.011322, 0.000793, -0.007263, -0.012146, -0.014984, -0.016205, -0.015778, -0.013367, -0.009705, -0.007263, -0.008087, -0.012543, -0.018616, -0.024689, -0.029572, -0.031189, -0.029144, -0.023895, -0.014984, -0.004456, 0.004456, 0.010529, 0.014557, 0.016205, 0.014557, 0.011322, 0.007690, 0.003632, -0.002014, -0.009705, -0.017395, -0.023071, -0.025513, -0.025116, -0.021851, -0.016998, -0.011749, -0.008087, -0.006866, -0.005249, -0.002411, 0.001617, 0.005646, 0.009308, 0.012146, 0.013763, 0.013367, 0.012146, 0.012146, 0.012543, 0.011322, 0.007263, 0.000793, -0.006470, -0.010529, -0.010101, -0.004852, 0.000793, 0.004028, 0.004852, 0.004028, 0.000793, -0.005249, -0.012543, -0.019440, -0.023499, -0.024689, -0.023895, -0.022675, -0.021454, -0.021057, -0.021057, -0.020233, -0.019043, -0.015778, -0.009308, -0.001617, 0.005249, 0.010925, 0.013367, 0.013367, 0.011322, 0.009308, 0.008484, 0.007263, 0.005249, 0.002014, -0.000793, -0.002014, -0.001190, 0.000000, 0.003235, 0.008911, 0.014160, 0.016602, 0.016205, 0.014160, 0.012939, 0.011322, 0.008911, 0.006073, 0.003235, 0.000793, 0.000793, 0.000793, 0.001617, 0.002411, 0.004028, 0.006073, 0.007690, 0.007690, 0.007263, 0.006073, 0.003632, 0.000000, -0.004028, -0.005249, -0.003235, -0.000397, 0.001190, 0.001617, 0.000397, -0.000793, -0.002411, -0.003632, -0.004456, -0.005646, -0.007690, -0.008484, -0.008087, -0.008484, -0.008911, -0.009705, -0.008484, -0.005249, -0.000793, 0.003632, 0.007690, 0.009308, 0.010101, 0.010101, 0.010101, 0.009308, 0.008087, 0.006470, 0.006470, 0.007263, 0.008087, 0.008484, 0.007263, 0.006470, 0.007690, 0.011749, 0.017822, 0.025513, 0.032410, 0.037659, 0.039703, 0.037659, 0.031982, 0.024292, 0.016602, 0.011322, 0.006866, 0.002808, -0.000397, -0.002411, -0.004456, -0.006866, -0.009705, -0.012543, -0.016205, -0.019440, -0.021057, -0.020233, -0.019043, -0.018219, -0.018616, -0.019836, -0.021057, -0.021454, -0.020233, -0.016998, -0.012543, -0.008911, -0.008911, -0.013367, -0.019043, -0.024689, -0.027130, -0.025513, -0.021851, -0.017395, -0.012543, -0.007690, -0.002411, 0.002808, 0.007690, 0.012543, 0.017822, 0.022675, 0.028748, 0.034424, 0.037659, 0.038483, 0.036865, 0.033630, 0.029572, 0.025513, 0.022278, 0.020233, 0.020660, 0.023499, 0.027130, 0.031189, 0.034027, 0.032410, 0.027527, 0.021454, 0.014557, 0.008911, 0.006470, 0.008087, 0.011749, 0.013763, 0.012146, 0.006073, -0.001617, -0.008484, -0.012146, -0.013763, -0.014557, -0.014984, -0.013367, -0.010925, -0.008087, -0.005249, -0.003632, -0.001190, 0.001617, 0.002014, 0.000000, -0.003632, -0.008911, -0.014557, -0.018219, -0.016998, -0.012939, -0.008484, -0.004852, -0.004456, -0.007263, -0.012146, -0.017395, -0.022278, -0.025116, -0.025116, -0.021851, -0.016602, -0.010925, -0.006470, -0.004456, -0.004028, -0.003235, -0.002411, -0.002014, -0.001617, -0.001190, -0.000793, 0.001617, 0.005249, 0.010925, 0.016602, 0.021454, 0.024689, 0.025116, 0.023071, 0.018219, 0.012146, 0.006470, 0.002411, 0.000397, 0.000000, 0.001617, 0.004456, 0.007263, 0.006866, 0.002808, -0.002808, -0.008484, -0.013763, -0.017822, -0.019836, -0.019836, -0.019440, -0.017822, -0.014557, -0.011322, -0.009705, -0.009308, -0.008911, -0.007690, -0.005249, -0.004456, -0.004852, -0.006470, -0.008484, -0.010101, -0.010925, -0.011749, -0.011322, -0.010529, -0.008087, -0.004852, -0.000793, 0.001190, 0.000000, -0.004852, -0.010101, -0.012543, -0.011749, -0.011322, -0.010925, -0.008484, -0.004028, 0.000397, 0.003632, 0.004852, 0.004456, 0.002808, 0.001190, 0.001190, 0.002411, 0.004852, 0.006866, 0.007690, 0.008087, 0.007690, 0.006470, 0.005249, 0.004028, 0.002808, 0.001617, 0.000793, -0.000397, -0.000397, 0.000793, 0.002014, 0.002014, 0.000793, -0.001617, -0.004852, -0.008087, -0.010925, -0.013367, -0.013763, -0.011749, -0.008087, -0.003235, 0.001190, 0.003632, 0.002411, -0.002411, -0.009705, -0.016602, -0.020660, -0.019440, -0.014160, -0.006470, 0.000793, 0.005646, 0.007690, 0.009705, 0.011749, 0.012146, 0.012146, 0.012543, 0.013367, 0.015778, 0.019440, 0.023071, 0.025909, 0.027527, 0.027527, 0.025116, 0.020233, 0.012146, 0.002808, -0.006470, -0.013763, -0.017822, -0.018616, -0.015778, -0.011322, -0.008484, -0.007690, -0.009308, -0.012543, -0.015381, -0.015778, -0.013367, -0.007263, 0.000397, 0.006866, 0.010101, 0.010529, 0.009705, 0.009308, 0.010101, 0.011749, 0.012543, 0.012939, 0.012543, 0.010529, 0.007263, 0.004028, 0.003235, 0.005249, 0.008911, 0.011322, 0.011322, 0.008087, 0.002808, -0.003235, -0.008484, -0.011749, -0.012146, -0.012543, -0.014557, -0.019043, -0.023499, -0.024292, -0.020660, -0.012939, -0.003632, 0.003632, 0.007263, 0.007263, 0.003632, -0.002014, -0.008087, -0.013367, -0.016998, -0.019440, -0.019440, -0.015381, -0.009705, -0.003632, 0.002411, 0.007263, 0.013367, 0.019043, 0.023895, 0.026733, 0.027527, 0.025513, 0.023071, 0.019043, 0.014557, 0.010529, 0.007263, 0.005249, 0.005249, 0.007263, 0.010529, 0.013367, 0.014984, 0.015778, 0.015381, 0.013367, 0.010529, 0.006866, 0.002411, -0.002014, -0.005646, -0.006866, -0.004852, -0.000793, 0.003632, 0.008484, 0.010925, 0.010529, 0.006866, 0.002014, -0.002014, -0.004456, -0.005249, -0.004852, -0.005646, -0.007263, -0.009308, -0.010925, -0.011322, -0.009705, -0.007690, -0.005646, -0.004852, -0.004852, -0.004456, -0.003632, -0.002014, 0.000000, 0.001190, 0.002411, 0.002014, 0.000793, -0.001190, -0.003632, -0.005646, -0.005646, -0.003632, 0.001190, 0.008087, 0.014984, 0.019440, 0.021454, 0.021057, 0.018219, 0.012543, 0.004852, -0.003235, -0.009308, -0.011322, -0.009705, -0.004456, 0.002808, 0.010529, 0.016998, 0.020660, 0.021057, 0.016998, 0.010529, 0.003235, -0.003632, -0.008911, -0.011749, -0.011749, -0.009308, -0.006470, -0.004852, -0.005249, -0.008087, -0.011749, -0.014984, -0.016998, -0.017822, -0.017822, -0.016602, -0.014557, -0.012146, -0.010529, -0.009308, -0.008911, -0.009308, -0.010925, -0.012146, -0.012939, -0.013367, -0.012543, -0.011749, -0.010529, -0.008911, -0.006470, -0.003632, -0.000793, 0.002411, 0.005249, 0.006470, 0.006073, 0.004456, 0.001190, -0.002808, -0.007263, -0.010101, -0.009705, -0.006470, 0.000397, 0.009308, 0.015778, 0.018219, 0.017395, 0.014160, 0.010529, 0.007690, 0.006073, 0.004456, 0.002014, -0.001190, -0.005249, -0.010101, -0.015381, -0.019440, -0.021454, -0.022278, -0.021851, -0.021057, -0.019440, -0.016998, -0.014557, -0.011322, -0.008911, -0.007263, -0.006073, -0.005646, -0.004852, -0.002411, 0.001617, 0.006470, 0.010101, 0.012543, 0.013763, 0.012146, 0.009308, 0.005646, 0.002411, 0.001190, 0.003235, 0.008087, 0.013763, 0.018616, 0.021057, 0.019440, 0.014557, 0.008911, 0.004852, 0.003235, 0.003632, 0.004852, 0.005646, 0.004852, 0.004456, 0.005249, 0.006470, 0.007263, 0.006470, 0.004028, 0.001190, -0.002014, -0.004852, -0.006470, -0.007690, -0.008484, -0.007263, -0.004456, -0.002411, -0.001617, -0.002014, -0.002411, -0.003235, -0.005249, -0.007690, -0.010101, -0.012543, -0.013763, -0.013367, -0.012146, -0.010529, -0.009308, -0.007263, -0.004456, -0.000793, 0.002014, 0.002014, 0.000793, 0.000397, 0.001617, 0.003235, 0.004028, 0.003632, 0.002808, 0.002808, 0.002411, 0.002014, 0.002411, 0.003632, 0.006073, 0.009308, 0.012543, 0.015778, 0.017822, 0.019043, 0.018219, 0.015381, 0.012146, 0.010101, 0.010101, 0.012146, 0.014160, 0.015778, 0.016602, 0.015381, 0.012543, 0.008484, 0.004852, 0.002411, 0.001190, 0.000000, -0.000793, -0.002411, -0.004852, -0.006866, -0.008484, -0.010529, -0.013367, -0.016205, -0.017395, -0.016998, -0.014557, -0.011322, -0.007263, -0.004852, -0.004456, -0.006073, -0.008484, -0.010101, -0.009705, -0.008484, -0.006470, -0.004028, -0.002808, -0.004028, -0.006073, -0.007690, -0.006073, -0.002808, 0.000397, 0.002808, 0.003235, 0.002411, 0.000793, -0.000397, -0.000793, 0.000000, 0.001617, 0.003235, 0.003632, 0.003235, 0.003632, 0.006073, 0.009308, 0.012146, 0.013367, 0.012543, 0.008911, 0.004028, -0.001617, -0.006470, -0.008484, -0.008484, -0.007263, -0.005249, -0.003632, -0.004028, -0.005646, -0.006866, -0.006470, -0.003235, 0.001617, 0.006866, 0.010925, 0.012939, 0.013367, 0.011322, 0.007263, 0.001617, -0.003632, -0.008484, -0.011749, -0.012939, -0.013367, -0.012939, -0.012146, -0.011322, -0.010925, -0.009705, -0.007690, -0.005249, -0.002411, -0.000397, 0.000397, -0.000793, -0.001617, -0.002014, -0.000793, 0.002411, 0.006866, 0.012146, 0.017395, 0.021057, 0.023071, 0.023895, 0.023499, 0.020660, 0.016602, 0.012543, 0.008911, 0.006073, 0.003632, 0.002014, 0.002014, 0.002808, 0.003235, 0.003235, 0.003235, 0.002411, 0.000397, -0.000793, -0.002014, -0.002808, -0.002808, -0.002014, -0.000397, 0.001617, 0.004028, 0.005646, 0.006073, 0.004456, 0.001190, -0.002808, -0.006470, -0.008484, -0.007690, -0.005646, -0.003235, -0.001617, -0.000793, -0.000793, -0.001617, -0.003235, -0.004852, -0.006470, -0.006866, -0.007263, -0.007263, -0.006866, -0.006470, -0.006073, -0.006073, -0.004028, -0.000793, 0.001190, 0.001617, 0.000793, -0.000793, -0.002411, -0.003235, -0.003632, -0.003235, -0.000793, 0.001617, 0.003235, 0.004456, 0.004456, 0.004028, 0.003632, 0.001617, -0.001617, -0.004456, -0.006073, -0.006073, -0.004852, -0.003632, -0.002411, -0.002014, -0.002411, -0.003632, -0.005646, -0.007263, -0.006866, -0.003632, 0.001617, 0.007690, 0.011749, 0.014160, 0.015381, 0.016602, 0.018616, 0.021057, 0.022278, 0.021851, 0.019043, 0.013763, 0.008087, 0.004028, 0.001190, -0.001617, -0.004852, -0.008087, -0.010101, -0.011322, -0.011322, -0.010101, -0.008911, -0.007690, -0.006866, -0.007263, -0.008911, -0.010529, -0.012146, -0.014160, -0.018219, -0.023499, -0.028748, -0.032410, -0.033630, -0.031189, -0.026733, -0.020660, -0.014160, -0.008087, -0.003235, -0.000793, -0.000793, -0.002014, -0.003632, -0.004028, -0.001190, 0.004456, 0.011322, 0.017395, 0.021057, 0.022675, 0.023499, 0.024292, 0.024689, 0.024689, 0.024292, 0.022675, 0.019440, 0.015778, 0.011322, 0.006470, 0.002411, 0.000000, -0.002014, -0.004456, -0.007690, -0.012146, -0.017822, -0.024689, -0.030792, -0.034821, -0.035645, -0.032806, -0.027130, -0.019440, -0.012939, -0.006866, -0.001617, 0.002411, 0.004852, 0.005646, 0.004852, 0.003235, 0.001190, 0.000397, 0.000397, 0.001190, 0.002808, 0.004028, 0.004456, 0.003235, 0.002411, 0.002411, 0.004028, 0.007263, 0.009308, 0.009705, 0.008087, 0.007690, 0.009705, 0.012543, 0.015778, 0.017822, 0.018219, 0.017395, 0.016205, 0.014557, 0.013367, 0.012543, 0.012939, 0.014160, 0.015778, 0.016205, 0.015381, 0.012939, 0.009705, 0.006470, 0.003632, 0.002014, 0.000397, -0.000793, -0.001617, -0.002808, -0.005249, -0.006866, -0.008087, -0.008911, -0.009308, -0.008484, -0.006470, -0.004852, -0.004456, -0.006073, -0.009308, -0.014557, -0.019043, -0.021851, -0.021057, -0.016998, -0.012146, -0.006470, -0.001617, 0.001190, 0.002808, 0.004028, 0.004456, 0.005249, 0.006073, 0.007263, 0.009705, 0.013367, 0.017395, 0.021851, 0.025513, 0.027954, 0.028351, 0.026337, 0.021454, 0.014557, 0.008484, 0.004456, 0.001190, -0.001190, -0.002411, -0.002411, -0.002411, -0.003235, -0.004852, -0.005646, -0.005249, -0.004456, -0.003632, -0.002411, -0.001190, -0.000397, 0.000793, 0.001190, 0.000793, 0.000000, 0.000000, 0.001190, 0.002014, 0.001190, -0.001617, -0.006866, -0.012543, -0.016998, -0.018219, -0.016998, -0.014984, -0.012939, -0.012146, -0.012543, -0.012543, -0.011749, -0.010101, -0.008484, -0.007263, -0.006470, -0.005646, -0.004852, -0.004028, -0.002014, 0.000793, 0.002411, 0.002014, 0.000397, -0.000397, 0.000793, 0.003632, 0.006470, 0.008484, 0.008911, 0.008911, 0.008484, 0.008911, 0.010101, 0.010529, 0.010529, 0.009308, 0.007690, 0.006866, 0.006470, 0.006470, 0.006073, 0.005249, 0.002014, -0.002808, -0.006866, -0.008911, -0.009308, -0.008484, -0.006073, -0.002808, 0.000397, 0.003235, 0.003632, 0.000793, -0.004852, -0.010101, -0.012543, -0.011322, -0.006866, -0.001617, 0.002808, 0.005646, 0.006470, 0.006073, 0.004852, 0.003632, 0.002411, 0.002411, 0.004028, 0.005646, 0.007690, 0.010101, 0.012939, 0.014160, 0.012939, 0.009705, 0.004852, 0.001190, -0.001617, -0.003632, -0.004852, -0.005249, -0.005646, -0.005646, -0.005646, -0.005646, -0.006866, -0.008484, -0.010529, -0.011749, -0.012146, -0.010101, -0.005646, -0.000793, 0.003632, 0.005646, 0.004456, 0.002411, 0.000000, -0.001190, -0.001190, -0.000793, 0.000793, 0.002808, 0.005646, 0.008087, 0.010101, 0.010925, 0.009705, 0.008087, 0.006073, 0.004028, 0.000793, -0.002808, -0.005646, -0.006866, -0.006073, -0.003235, 0.000793, 0.004852, 0.008484, 0.010529, 0.010925, 0.010101, 0.008087, 0.004456, -0.000397, -0.005646, -0.009705, -0.011322, -0.010925, -0.010101, -0.008484, -0.006866, -0.005249, -0.003235, -0.001617, -0.002014, -0.003235, -0.004456, -0.005646, -0.007263, -0.010101, -0.011749, -0.011749, -0.010101, -0.007263, -0.004028, -0.001617, 0.000000, 0.000397, 0.000397, 0.001190, 0.004028, 0.008087, 0.011749, 0.013367, 0.012543, 0.010925, 0.008911, 0.006866, 0.006470, 0.006866, 0.007263, 0.007263, 0.007263, 0.007263, 0.006470, 0.003632, 0.000397, -0.002808, -0.004852, -0.004852, -0.003632, -0.002411, -0.002014, -0.002411, -0.003235, -0.004456, -0.004852, -0.004456, -0.004028, -0.003632, -0.003632, -0.003632, -0.002808, -0.001617, 0.000397, 0.002014, 0.002808, 0.001617, 0.000000, -0.002808, -0.005646, -0.008484, -0.011322, -0.012939, -0.012146, -0.009308, -0.006470, -0.004028, -0.004028, -0.005249, -0.007690, -0.009308, -0.008484, -0.006073, -0.002808, 0.001617, 0.006470, 0.010101, 0.012146, 0.012146, 0.010925, 0.008911, 0.007263, 0.006073, 0.005249, 0.004456, 0.005249, 0.007690, 0.009705, 0.010101, 0.008911, 0.006866, 0.004456, 0.003235, 0.003632, 0.003235, 0.002014, 0.000397, -0.002014, -0.004852, -0.006470, -0.007690, -0.008087, -0.007690, -0.005646, -0.002411, 0.000397, 0.001190, 0.000000, -0.002411, -0.004028, -0.004028, -0.001617, 0.002411, 0.005646, 0.007263, 0.007263, 0.006073, 0.004456, 0.002411, 0.000397, -0.000793, -0.000793, 0.000000, 0.000793, 0.000793, 0.000000, -0.001617, -0.004028, -0.007263, -0.010529, -0.012543, -0.012939, -0.012543, -0.012146, -0.012146, -0.012543, -0.012543, -0.012146, -0.010925, -0.008911, -0.006470, -0.003632, -0.000793, 0.002014, 0.004456, 0.006470, 0.007263, 0.007690, 0.007263, 0.006470, 0.006073, 0.006470, 0.007690, 0.009308, 0.011322, 0.014160, 0.017395, 0.019440, 0.019836, 0.019440, 0.017822, 0.014160, 0.008911, 0.001617, -0.005249, -0.010101, -0.012146, -0.010925, -0.007263, -0.001617, 0.004456, 0.009308, 0.011749, 0.011322, 0.007690, 0.002411, -0.003235, -0.008087, -0.010101, -0.009705, -0.008087, -0.006073, -0.003632, -0.002014, -0.000397, 0.000000, 0.000397, 0.000000, -0.000793, -0.002014, -0.004028, -0.005646, -0.006866, -0.007263, -0.006866, -0.006073, -0.004852, -0.002808, -0.000397, 0.001190, 0.002808, 0.003632, 0.004456, 0.005646, 0.007690, 0.008911, 0.008911, 0.006470, 0.002014, -0.002808, -0.006470, -0.007263, -0.005249, -0.002014, 0.001190, 0.005249, 0.008484, 0.010925, 0.011749, 0.012146, 0.012146, 0.011749, 0.009705, 0.006866, 0.003632, 0.002014, 0.002014, 0.001617, 0.000000, -0.003235, -0.006470, -0.009308, -0.010925, -0.011749, -0.011322, -0.009705, -0.008087, -0.006073, -0.004456, -0.003235, -0.002014, -0.001617, -0.002014, -0.002014, -0.002411, -0.002808, -0.002411, -0.001617, -0.000793, 0.000000, 0.000397, 0.000397, 0.000793, 0.000793, 0.000793, 0.000000, -0.001190, -0.002014, -0.002014, -0.000793, 0.001190, 0.002411, 0.002014, 0.000793, -0.000397, -0.002014, -0.002808, -0.002808, -0.002014, -0.001190, -0.000397, 0.000397, 0.000793, 0.000397, -0.001190, -0.003235, -0.004456, -0.004028, -0.003632, -0.002411, -0.001190, 0.000793, 0.002808, 0.004852, 0.006866, 0.008911, 0.010101, 0.010529, 0.010101, 0.008911, 0.007263, 0.004028, 0.001190, -0.000793, -0.003235, -0.005249, -0.006866, -0.006866, -0.006073, -0.004028, -0.002411, -0.000793, 0.000000, 0.001190, 0.002411, 0.003235, 0.003632, 0.003235, 0.002411, 0.002411, 0.003235, 0.004852, 0.007690, 0.010925, 0.014984, 0.019440, 0.022278, 0.022675, 0.021851, 0.019440, 0.016602, 0.013367, 0.009705, 0.005646, 0.002411, 0.000397, 0.000000, 0.000397, 0.000397, -0.000793, -0.002411, -0.004456, -0.006073, -0.007263, -0.008087, -0.008087, -0.007690, -0.007263, -0.007263, -0.008087, -0.008911, -0.010101, -0.010529, -0.010925, -0.011322, -0.011322, -0.010925, -0.010529, -0.009705, -0.008484, -0.006866, -0.004456, -0.001617, 0.001190, 0.003632, 0.005249, 0.006073, 0.006866, 0.007263, 0.006866, 0.005646, 0.004456, 0.004028, 0.005249, 0.006866, 0.008087, 0.008087, 0.006470, 0.003235, 0.000397, -0.001617, -0.002014, -0.002014, -0.002014, -0.002014, -0.002808, -0.003632, -0.003632, -0.003235, -0.002411, -0.001617, -0.001617, -0.002411, -0.003235, -0.004028, -0.004852, -0.005646, -0.006073, -0.006073, -0.006470, -0.006073, -0.004852, -0.003632, -0.002808, -0.002014, -0.002808, -0.004456, -0.006470, -0.008911, -0.011322, -0.012939, -0.013367, -0.012146, -0.009705, -0.006866, -0.004028, -0.001190, 0.002411, 0.007263, 0.011322, 0.013367, 0.012146, 0.007690, 0.002411, -0.002808, -0.006073, -0.006470, -0.004456, -0.002411, -0.000793, -0.000397, -0.001190, -0.002411, -0.003235, -0.004028, -0.004456, -0.004456, -0.004028, -0.003235, -0.002411, -0.001190, 0.000793, 0.002411, 0.003235, 0.003235, 0.002411, 0.001617, -0.000793, -0.003235, -0.006470, -0.008911, -0.009705, -0.009308, -0.006866, -0.002411, 0.002411, 0.006073, 0.008087, 0.008087, 0.005249, 0.000397, -0.004028, -0.006866, -0.006470, -0.004456, -0.001617, 0.001617, 0.004456, 0.006073, 0.005646, 0.004028, 0.002014, 0.001190, 0.000793, 0.000000, -0.000397, -0.000793, 0.000000, 0.000793, 0.000793, 0.000793, 0.000793, 0.001617, 0.002808, 0.005646, 0.008087, 0.010101, 0.010101, 0.008087, 0.004456, 0.000793, -0.002411, -0.004456, -0.004852, -0.004028, -0.002014, -0.000397, 0.000793, 0.000793, 0.000793, -0.000397, -0.002411, -0.003632, -0.004028, -0.003235, -0.002014, -0.000793, 0.001190, 0.002808, 0.003632, 0.003632, 0.003235, 0.002014, 0.000000, -0.001190, -0.002014, -0.002808, -0.003235, -0.004028, -0.004456, -0.004456, -0.003235, -0.002014, -0.002014, -0.004028, -0.006470, -0.008911, -0.009308, -0.007690, -0.004852, -0.001617, 0.001190, 0.002808, 0.004028, 0.004852, 0.006470, 0.007690, 0.008087, 0.007690, 0.006470, 0.004456, 0.002014, -0.000397, -0.002808, -0.004456, -0.005249, -0.004456, -0.002808, -0.001617, -0.000397, 0.000793, 0.000793, 0.000397, -0.000397, -0.001190, -0.002411, -0.002808, -0.003235, -0.004456, -0.006866, -0.009705, -0.012543, -0.014557, -0.015778, -0.015381, -0.012939, -0.009308, -0.005249, -0.001190, 0.002411, 0.005249, 0.006866, 0.008911, 0.011322, 0.013367, 0.014984, 0.015381, 0.014984, 0.013763, 0.012146, 0.010529, 0.009705, 0.009308, 0.009705, 0.009308, 0.008484, 0.006866, 0.004456, 0.002411, 0.001190, 0.000397, -0.000397, -0.000793, -0.001617, -0.002411, -0.002411, -0.001190, 0.000793, 0.002411, 0.003632, 0.003632, 0.003235, 0.002411, 0.001617, 0.000397, -0.000793, -0.001617, -0.001617, -0.001617, -0.002014, -0.002411, -0.003235, -0.004028, -0.004852, -0.005249, -0.006073, -0.006866, -0.008484, -0.011322, -0.014160, -0.016205, -0.015778, -0.012939, -0.009308, -0.006073, -0.004028, -0.002411, -0.000793, 0.000397, 0.000000, -0.001617, -0.003235, -0.003235, -0.001190, 0.002014, 0.005249, 0.007263, 0.008484, 0.008484, 0.007263, 0.005249, 0.002411, -0.000397, -0.001617, -0.002014, -0.001617, -0.000397, 0.000793, 0.001617, 0.002411, 0.004456, 0.007690, 0.011322, 0.013763, 0.014557, 0.012939, 0.010529, 0.007263, 0.004028, 0.001617, 0.000000, -0.000397, -0.000793, -0.000793, -0.000793, -0.001617, -0.002014, -0.002808, -0.003235, -0.003235, -0.002808, -0.001190, 0.000397, 0.002411, 0.004456, 0.006073, 0.006470, 0.004852, 0.001617, -0.001617, -0.005249, -0.008484, -0.010529, -0.010101, -0.007690, -0.003632, 0.001190, 0.004852, 0.006866, 0.007263, 0.006866, 0.006866, 0.006470, 0.005646, 0.003632, 0.001190, -0.001190, -0.004028, -0.005646, -0.005646, -0.004852, -0.002411, 0.000000, 0.002808, 0.004028, 0.004456, 0.004028, 0.002411, 0.000000, -0.002808, -0.004852, -0.005249, -0.004456, -0.003235, -0.001617, 0.000000, 0.001190, 0.001190, 0.000000, -0.003235, -0.006866, -0.010101, -0.012543, -0.013367, -0.012146, -0.009308, -0.005249, -0.000793, 0.002808, 0.004852, 0.006470, 0.008484, 0.010529, 0.010925, 0.008911, 0.005249, 0.000793, -0.002411, -0.004028, -0.005249, -0.005249, -0.005249, -0.004852, -0.003235, -0.000397, 0.002808, 0.006073, 0.008484, 0.010101, 0.010925, 0.011749, 0.012146, 0.011322, 0.009308, 0.007690, 0.006470, 0.005646, 0.004852, 0.003632, 0.002014, 0.000000, -0.002411, -0.004852, -0.006866, -0.008484, -0.008484, -0.007690, -0.006470, -0.006073, -0.006866, -0.008484, -0.010529, -0.013367, -0.016602, -0.018219, -0.018616, -0.016998, -0.013763, -0.008911, -0.003632, 0.000397, 0.003235, 0.005646, 0.006470, 0.006866, 0.008087, 0.009705, 0.011322, 0.013763, 0.015778, 0.017395, 0.018616, 0.018219, 0.016205, 0.013763, 0.010925, 0.007690, 0.004456, 0.002014, 0.000000, -0.000397, 0.000000, 0.000397, 0.000793, 0.001190, 0.002014, 0.003632, 0.004028, 0.003235, 0.001190, -0.000793, -0.003235, -0.004852, -0.006470, -0.007690, -0.008911, -0.010529, -0.010925, -0.011322, -0.011322, -0.010529, -0.010101, -0.010925, -0.012146, -0.013367, -0.014160, -0.014160, -0.013367, -0.011749, -0.010101, -0.008484, -0.007263, -0.006073, -0.005249, -0.004456, -0.002808, -0.000397, 0.002808, 0.005646, 0.008484, 0.010529, 0.011749, 0.011749, 0.010529, 0.008484, 0.006470, 0.005646, 0.005646, 0.006073, 0.007263, 0.008911, 0.011749, 0.014557, 0.016602, 0.017822, 0.017822, 0.016602, 0.014557, 0.012543, 0.011322, 0.010101, 0.008484, 0.005646, 0.002411, -0.000793, -0.003235, -0.005646, -0.007690, -0.008484, -0.008087, -0.007263, -0.006470, -0.006470, -0.006866, -0.007263, -0.006470, -0.005646, -0.004456, -0.003235, -0.002411, -0.001617, -0.001190, -0.000397, 0.000000, 0.000000, 0.000000, 0.000397, 0.000397, 0.000793, 0.000793, 0.001190, 0.001190, 0.001190, 0.000000, -0.002014, -0.004028, -0.006073, -0.007263, -0.007263, -0.006866, -0.005249, -0.003235, -0.002411, -0.002808, -0.003632, -0.004456, -0.004456, -0.003632, -0.003235, -0.002014, -0.000793, 0.000397, 0.001190, 0.001190, 0.001617, 0.001190, 0.000397, -0.000793, -0.002411, -0.003632, -0.005249, -0.006470, -0.006866, -0.005646, -0.003235, 0.000000, 0.002411, 0.004456, 0.005249, 0.004852, 0.003235, 0.000793, -0.002014, -0.004456, -0.005646, -0.006073, -0.005646, -0.004028, -0.002014, 0.000397, 0.002014, 0.003632, 0.004028, 0.003235, 0.002411, 0.002411, 0.003235, 0.004456, 0.005646, 0.006866, 0.006866, 0.006866, 0.006470, 0.006866, 0.007690, 0.008484, 0.009308, 0.009308, 0.008484, 0.006866, 0.005249, 0.004456, 0.003632, 0.002808, 0.000793, -0.002014, -0.004852, -0.008484, -0.012146, -0.014557, -0.015381, -0.014557, -0.012543, -0.009308, -0.005646, -0.002808, -0.000397, 0.000397, 0.000397, 0.000000, -0.000397, 0.000000, 0.000397, 0.000793, 0.001190, 0.001190, 0.001190, 0.001190, 0.002014, 0.002411, 0.003235, 0.004028, 0.004852, 0.004456, 0.003235, 0.001190, -0.000397, -0.001190, 0.000000, 0.002411, 0.005249, 0.007263, 0.008484, 0.009308, 0.009308, 0.008484, 0.007263, 0.006073, 0.004456, 0.002808, 0.000793, -0.001190, -0.002808, -0.003632, -0.002808, 0.000000, 0.003632, 0.004852, 0.002808, -0.002411, -0.008911, -0.014557, -0.018219, -0.019043, -0.018219, -0.016205, -0.014160, -0.012543, -0.011322, -0.010101, -0.010101, -0.010529, -0.011322, -0.011749, -0.012543, -0.012543, -0.012146, -0.010529, -0.007690, -0.005646, -0.004456, -0.004028, -0.003632, -0.002411, 0.000000, 0.002808, 0.006073, 0.008484, 0.009705, 0.009705, 0.008911, 0.007690, 0.006866, 0.006866, 0.006866, 0.007690, 0.008484, 0.009308, 0.009705, 0.009308, 0.009308, 0.008484, 0.008087, 0.007690, 0.007263, 0.007263, 0.007263, 0.007263, 0.006470, 0.005249, 0.004456, 0.003632, 0.002014, -0.000793, -0.004456, -0.007690, -0.008911, -0.008087, -0.006470, -0.004852, -0.003632, -0.003632, -0.003632, -0.004028, -0.004028, -0.003632, -0.002411, -0.001190, -0.000397, -0.000793, -0.001190, -0.001617, -0.001617, -0.000397, 0.000397, 0.001617, 0.003235, 0.004852, 0.006470, 0.007263, 0.006866, 0.005646, 0.003632, 0.001617, 0.000000, -0.000397, -0.000397, 0.001190, 0.002014, 0.002014, 0.000397, -0.001190, -0.001190, -0.000397, 0.001190, 0.002411, 0.002808, 0.001617, -0.000397, -0.003235, -0.005249, -0.006073, -0.005646, -0.004456, -0.003632, -0.003235, -0.002808, -0.002014, 0.000000, 0.001190, 0.001617, 0.000793, -0.000397, -0.001617, -0.002808, -0.002808, -0.001617, 0.001190, 0.004028, 0.006470, 0.007690, 0.008087, 0.008087, 0.007263, 0.005646, 0.004028, 0.002808, 0.002808, 0.002808, 0.002808, 0.002411, 0.001190, -0.000397, -0.001617, -0.002014, -0.001617, -0.000793, 0.000000, 0.000793, 0.002014, 0.002411, 0.001617, 0.000397, -0.001190, -0.002411, -0.003632, -0.004028, -0.004456, -0.004852, -0.004456, -0.004028, -0.002808, -0.001617, -0.000793, -0.000793, -0.002014, -0.004456, -0.006866, -0.008911, -0.008911, -0.007690, -0.004852, -0.002014, 0.000397, 0.001190, 0.001190, 0.001190, 0.001617, 0.001617, 0.001190, 0.000397, -0.001190, -0.002014, -0.002411, -0.001617, -0.000793, 0.000000, 0.000793, 0.001190, 0.002014, 0.003235, 0.004852, 0.005249, 0.004852, 0.004852, 0.004028, 0.003235, 0.002808, 0.002808, 0.003632, 0.005646, 0.008484, 0.011322, 0.013367, 0.014557, 0.014160, 0.012939, 0.010925, 0.008087, 0.004852, 0.001617, -0.000793, -0.001617, -0.001617, -0.000793, -0.000397, -0.000793, -0.001190, -0.001617, -0.002014, -0.002014, -0.003235, -0.005646, -0.008087, -0.010101, -0.011322, -0.011749, -0.011322, -0.010925, -0.010101, -0.008484, -0.006073, -0.004028, -0.002014, -0.000397, 0.000793, 0.002014, 0.003235, 0.004028, 0.003632, 0.002411, 0.001190, 0.000397, -0.000793, -0.001617, -0.002411, -0.002808, -0.002411, -0.000397, 0.001617, 0.003235, 0.004028, 0.004028, 0.003632, 0.003632, 0.003632, 0.003632, 0.004028, 0.003632, 0.003632, 0.003235, 0.002411, 0.001190, 0.000397, 0.000000, 0.000000, 0.000793, 0.002014, 0.003235, 0.003632, 0.002808, 0.000397, -0.002411, -0.004456, -0.005249, -0.004852, -0.004456, -0.003235, -0.002014, -0.000793, -0.000397, -0.000397, -0.001190, -0.002411, -0.003235, -0.003235, -0.002411, -0.000793, 0.001190, 0.003235, 0.004852, 0.006866, 0.008484, 0.009308, 0.008484, 0.006470, 0.004456, 0.002808, 0.002411, 0.002411, 0.002411, 0.002411, 0.001190, -0.000397, -0.002808, -0.005646, -0.007690, -0.009308, -0.010529, -0.011322, -0.012146, -0.011749, -0.010529, -0.008484, -0.006866, -0.006073, -0.006470, -0.006866, -0.007263, -0.006073, -0.003632, -0.000397, 0.002808, 0.004852, 0.006073, 0.005646, 0.004456, 0.002808, 0.001617, 0.001190, 0.002014, 0.003235, 0.004852, 0.006073, 0.006470, 0.006073, 0.005249, 0.004028, 0.002014, 0.000000, -0.001617, -0.002411, -0.002014, -0.000397, 0.001617, 0.003235, 0.004852, 0.006470, 0.007690, 0.008087, 0.008484, 0.008484, 0.008087, 0.006470, 0.004028, 0.000397, -0.004028, -0.008087, -0.010529, -0.010529, -0.008484, -0.006073, -0.004028, -0.002014, -0.000397, 0.000397, 0.000793, 0.001190, 0.001190, 0.000793, -0.000397, -0.001190, -0.000793, 0.000000, 0.000793, 0.001190, 0.000397, 0.000397, 0.000397, 0.000793, 0.001190, 0.001190, 0.001190, 0.000793, 0.000397, 0.000397, 0.001190, 0.001617, 0.002014, 0.002014, 0.001190, -0.000397, -0.002014, -0.003235, -0.003632, -0.003235, -0.002808, -0.002411, -0.002411, -0.003235, -0.003632, -0.004028, -0.004028, -0.002808, -0.000793, 0.001617, 0.004028, 0.006470, 0.007690, 0.008087, 0.006470, 0.004028, 0.000793, -0.001617, -0.004028, -0.005646, -0.007263, -0.008911, -0.010529, -0.011322, -0.011749, -0.012146, -0.010925, -0.008911, -0.005646, -0.003235, -0.001617, 0.000000, 0.001190, 0.002808, 0.003632, 0.003235, 0.002411, 0.000793, 0.000000, 0.000000, 0.000397, 0.001617, 0.002411, 0.002411, 0.001190, 0.000000, -0.000793, -0.001190, -0.000397, 0.000397, 0.002411, 0.004456, 0.006073, 0.006866, 0.007263, 0.006866, 0.006866, 0.006866, 0.007263, 0.007690, 0.008087, 0.007690, 0.006470, 0.004852, 0.002411, 0.000000, -0.001617, -0.002808, -0.002808, -0.002014, -0.000397, 0.001190, 0.002808, 0.003235, 0.002808, 0.001190, -0.000397, -0.001190, -0.001617, -0.002014, -0.003632, -0.005646, -0.007263, -0.008484, -0.008911, -0.009308, -0.009308, -0.008484, -0.007690, -0.007263, -0.006866, -0.006470, -0.006470, -0.007263, -0.008484, -0.008484, -0.007263, -0.004028, 0.000000, 0.003235, 0.005249, 0.006073, 0.005249, 0.004028, 0.002411, 0.001190, 0.000793, 0.001190, 0.002808, 0.004456, 0.005646, 0.006470, 0.006073, 0.005249, 0.003632, 0.002411, 0.002014, 0.002014, 0.002411, 0.002411, 0.002808, 0.003235, 0.003235, 0.002411, 0.001617, 0.000000, -0.001190, -0.002014, -0.001617, -0.001617, -0.001617, -0.002411, -0.003235, -0.004456, -0.006073, -0.007263, -0.008087, -0.008484, -0.008484, -0.007690, -0.006073, -0.004456, -0.002808, -0.000793, 0.001190, 0.003235, 0.004852, 0.006073, 0.005646, 0.003235, 0.000000, -0.003632, -0.005646, -0.005249, -0.002808, 0.000397, 0.003235, 0.005646, 0.006470, 0.006073, 0.005249, 0.004028, 0.002411, 0.000793, -0.000397, -0.001190, -0.001190, -0.000397, 0.000793, 0.002014, 0.002411, 0.002014, 0.001190, 0.000000, -0.000793, -0.001190, -0.000793, -0.000397, 0.000397, 0.000793, 0.001190, 0.001190, 0.000000, -0.001617, -0.003235, -0.004028, -0.003235, -0.000793, 0.001617, 0.003632, 0.004456, 0.004028, 0.002808, 0.001617, 0.001190, 0.001617, 0.002014, 0.002014, 0.001617, 0.000397, -0.001617, -0.004028, -0.005646, -0.006866, -0.006866, -0.006866, -0.005646, -0.004028, -0.002411, -0.000793, 0.000000, 0.000397, 0.000793, 0.000793, 0.000397, -0.000397, -0.001617, -0.002411, -0.002808, -0.002014, -0.001190, -0.000793, 0.000397, 0.002014, 0.004028, 0.006073, 0.008087, 0.009308, 0.009705, 0.010101, 0.010101, 0.009705, 0.009308, 0.008484, 0.007263, 0.005249, 0.002808, 0.000397, -0.002014, -0.003235, -0.004456, -0.004852, -0.004852, -0.004852, -0.005249, -0.005249, -0.005249, -0.005646, -0.006470, -0.008087, -0.009308, -0.010101, -0.009705, -0.007690, -0.004852, -0.002014, 0.000793, 0.002411, 0.003235, 0.002808, 0.002411, 0.002411, 0.003235, 0.005249, 0.007690, 0.008087, 0.006866, 0.004852, 0.002014, 0.000000, -0.000793, -0.000397, 0.000397, 0.002014, 0.003632, 0.005249, 0.006073, 0.006470, 0.006073, 0.005249, 0.004028, 0.003235, 0.002411, 0.002014, 0.002411, 0.003235, 0.004028, 0.004028, 0.004028, 0.004456, 0.004852, 0.004852, 0.004028, 0.002411, 0.000793, -0.001190, -0.002808, -0.002411, -0.001190, 0.000000, 0.000793, 0.000000, -0.002014, -0.004028, -0.006073, -0.007263, -0.008087, -0.008484, -0.007690, -0.006073, -0.003632, -0.002014, -0.001190, -0.001190, -0.001617, -0.002014, -0.002808, -0.003632, -0.004028, -0.002808, -0.000397, 0.002014, 0.004028, 0.004852, 0.004852, 0.004852, 0.004456, 0.003632, 0.002411, 0.000793, -0.000397, -0.001617, -0.002014, -0.001617, -0.000397, 0.001190, 0.002014, 0.002411, 0.002808, 0.003235, 0.003235, 0.002411, 0.001617, 0.000793, 0.000793, 0.001617, 0.002808, 0.004456, 0.005646, 0.006866, 0.007263, 0.006470, 0.004852, 0.002014, -0.001190, -0.003632, -0.004852, -0.004852 };

void ofApp::updatePMinMax() {
    pMin.x = BALL_RADIUS;
    pMin.y = BALL_RADIUS;
    pMax.x = ofGetWidth() - BALL_RADIUS;
    pMax.y = ofGetHeight() - BALL_RADIUS;
}

//--------------------------------------------------------------
void ofApp::setup(){
    updatePMinMax();

    // initialize ball positions, velocities, rFactors to random values
    const float MAX_SPEED = 500.f;
    const float MIN_RFACTOR = 0.3f;
    const float MAX_RFACTOR = 0.8f;
    for (int i = 0; i < N_BALLS; i++) {
        p[i].x = pMin.x + ofRandomuf() * (pMax.x - pMin.x);
        p[i].y = pMin.y + ofRandomuf() * (pMax.y - pMin.y);

        float speed = ofRandomuf() * MAX_SPEED;
        float theta = ofRandomuf() * TWO_PI;
        v[i].x = speed * cosf(theta);
        v[i].y = speed * sinf(theta);

        rFactors[i] = MIN_RFACTOR + ofRandomuf() * (MAX_RFACTOR - MIN_RFACTOR);
    }

    gravity = ofVec2f(0.f, GRAVITY_MAG);
    mouseAttract = false;
    
    ofSoundStreamSetup(2, 0, AUDIO_SAMPLE_RATE, 256, 4);
    ofSetFrameRate(60);
}

float ofApp::updatePositionUntilCollision(ofVec2f* p, ofVec2f* v, float dt, float rFactor, float* vn) {
    ofVec2f pAfterDt = *p + dt * *v;
    
    // values if no collision occurs
    ofVec2f pNext = pAfterDt;
    ofVec2f vNext = *v;
    *vn = 0.f;

    // check each wall for a collision; update pNext, vNext to reflect closest collision
    float dtToProcess = dt;
    if (pAfterDt.x < pMin.x) {
        float dtX = (pMin.x - p->x) / v->x;     // time to left wall
        if (dtX < dtToProcess) {
            dtToProcess = dtX;
            pNext = ofVec2f(pMin.x, p->y + dtX * v->y);
            vNext = ofVec2f(-rFactor * v->x, v->y);
            *vn = -v->x;
        }
    } else if (pAfterDt.x > pMax.x) {
        float dtX = (pMax.x - p->x) / v->x;     // time to right wall
        if (dtX < dtToProcess) {
            dtToProcess = dtX;
            pNext = ofVec2f(pMax.x, p->y + dtX * v->y);
            vNext = ofVec2f(-rFactor * v->x, v->y);
            *vn = v->x;
        }
    }
    if (pAfterDt.y < pMin.y) {
        float dtY = (pMin.y - p->y) / v->y;     // time to top wall
        if (dtY < dtToProcess) {
            dtToProcess = dtY;
            pNext = ofVec2f(p->x + dtY * v->x, pMin.y);
            vNext = ofVec2f(v->x, -rFactor * v->y);
            *vn = -v->y;
        }
    } else if (pAfterDt.y > pMax.y) {
        float dtY = (pMax.y - p->y) / v->y;     // time to bottom wall
        if (dtY < dtToProcess) {
            dtToProcess = dtY;
            pNext = ofVec2f(p->x + dtY * v->x, pMax.y);
            vNext = ofVec2f(v->x, -rFactor * v->y);
            *vn = v->y;
        }
    }
    assert(dtToProcess >= 0.f && dtToProcess <= dt);
    assert(*vn >= 0.f);
    *p = pNext;
    *v = vNext;
    return dtToProcess;
}

//--------------------------------------------------------------
void ofApp::update(){
    updatePMinMax();

    float dt = ofGetLastFrameTime();

    // update ball velocities
    for (int i = 0; i < N_BALLS; i++) {
        v[i] += dt * gravity;
    }
    if (mouseAttract) {
        for (int i = 0; i < N_BALLS; i++) {
            ofVec2f toMouse = mousePos - p[i];
            float dSq = toMouse.lengthSquared();
            ofVec2f accel = (MOUSE_CURSOR_MASS / dSq) * toMouse;    // falls off as R
            v[i] += dt * accel;
        }
    }

    // update ball positions; add a wav instance for each wall collision
    WavInstance newWavInstances[MAX_WAV_INSTANCES];
    int newWavCount = 0;

    const float VN_UNATTENUATED = 1000.f;
    float vn_threshold = 3.f * dt * GRAVITY_MAG;
    for (int i = 0; i < N_BALLS; i++) {
        float dtRemain = dt;
        while (true) {
            float vn = 0.f;
            dtRemain -= updatePositionUntilCollision(&p[i], &v[i], dtRemain, rFactors[i], &vn);
            if (dtRemain > 0.f) {
                // wall collision occurred; find out how many audio samples into this frame
                // the collision occurred and use that as its delay.
                float atten = (vn - vn_threshold) / (VN_UNATTENUATED - vn_threshold);
                atten = std::min(atten, 1.f);
                if (atten > 0.f) {
                    int sampleAt = -(dt - dtRemain) * AUDIO_SAMPLE_RATE;
                    newWavInstances[newWavCount++] = WavInstance(sampleAt, atten);
                }
            } else {
                break;
            }
        };
    }

    // sort by sampleAt and record the new wav instances
    std::sort(newWavInstances, &newWavInstances[newWavCount],
        [](const WavInstance& a, const WavInstance& b) -> bool
        {
            return a.sampleAt > b.sampleAt;
        });

    wavInstancesLock.lock();
    wavInstances.push(newWavInstances, newWavCount);
    wavInstancesLock.unlock();
}

//--------------------------------------------------------------
void ofApp::draw(){
    ofBackground(0);
    ofSetColor(255, 0, 0);
    ofFill();

    // draw balls
    for (int i = 0; i < N_BALLS; i++) {
        ofCircle(p[i], BALL_RADIUS);
    }

    ofDrawBitmapString(ofToString(ofGetFrameRate()) + "fps", 10, 15);
}

//--------------------------------------------------------------
void ofApp::audioOut(float* output, int bufferSize, int nChannels) {
    memset(output, 0, nChannels * bufferSize * sizeof(float));

    // for each wav instance, add samples to audio buffer and advance sample offset
    int instancesCompleted = 0;
    auto end = wavInstances.end();
    for (auto wavIter = wavInstances.begin(); wavIter != end; ++wavIter) {
        WavInstance& wavInstance = *wavIter;
        if (wavInstance.sampleAt <= -bufferSize) {
            wavInstance.sampleAt += bufferSize;
            continue;
        }
        int samplesToPush = bufferSize;
        float* outputAt = output;
        if (wavInstance.sampleAt < 0) {
            samplesToPush += wavInstance.sampleAt;
            outputAt -= wavInstance.sampleAt;
            wavInstance.sampleAt = 0;
        }
        if (wavInstance.sampleAt + samplesToPush > WAV_SAMPLES) {
            samplesToPush = WAV_SAMPLES - wavInstance.sampleAt;
            instancesCompleted++;
        }

        for (int i = 0; i < samplesToPush; i++) {
            for (int j = 0; j < nChannels; j++) {
                *(outputAt++) += wavInstance.atten * wav[wavInstance.sampleAt];
            }
            wavInstance.sampleAt++;
        }
    }
    // since wavInstances is sorted, the instances that are done playing must be
    // at the front (read location) of the circular buffer.
    if (instancesCompleted > 0) {
        wavInstancesLock.lock();
        wavInstances.pop(instancesCompleted);
        wavInstancesLock.unlock();
    }
}

//--------------------------------------------------------------
void ofApp::keyPressed(int key){

}

//--------------------------------------------------------------
void ofApp::keyReleased(int key){
    switch (key) {
    case OF_KEY_LEFT:
        gravity = ofVec2f(-GRAVITY_MAG, 0.f);
        break;
    case OF_KEY_RIGHT:
        gravity = ofVec2f(GRAVITY_MAG, 0.f);
        break;
    case OF_KEY_UP:
        gravity = ofVec2f(0.f, -GRAVITY_MAG);
        break;
    case OF_KEY_DOWN:
        gravity = ofVec2f(0.f, GRAVITY_MAG);
        break;
    default:
        break;
    }
}

//--------------------------------------------------------------
void ofApp::mouseMoved(int x, int y ){

}

//--------------------------------------------------------------
void ofApp::mouseDragged(int x, int y, int button){
    mousePos = ofVec2f(x, y);
}

//--------------------------------------------------------------
void ofApp::mousePressed(int x, int y, int button){
    mouseAttract = true;
    mousePos = ofVec2f(x, y);
}

//--------------------------------------------------------------
void ofApp::mouseReleased(int x, int y, int button){
    mouseAttract = false;
}

//--------------------------------------------------------------
void ofApp::windowResized(int w, int h){

}

//--------------------------------------------------------------
void ofApp::gotMessage(ofMessage msg){

}

//--------------------------------------------------------------
void ofApp::dragEvent(ofDragInfo dragInfo){ 

}
